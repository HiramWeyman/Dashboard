<link rel="stylesheet" href="../../../assets/css/login.css">

<form class="row" [formGroup]="forma" (ngSubmit)="Pagar()">
<div class="alert alert-dark" role="alert">
    <div class="row" style="display: flex;">
        <div class="selectWrapper col-sm-10" >
        <select formControlName="descuentos" (change)="valuesSelect($event.target.value);">
            <option value="" selected disabled> - Seleccione un descuento - </option>
            <option *ngFor="let descuento of descuentos" [value]='descuento.vdes_id'>{{ descuento.vdes_concepto }}</option>
        </select>
        </div> 
    </div>

    <ng-container *ngIf="descuentos?.length > 0">
        <table class="table table-hover table-sm">
            <thead>
                <tr>
                    <th>Cantidad</th>
                    <th>Descripcion</th>
                    <th>P. Unit.</th>
                    <th>Importe</th>
                    <th>%</th>
                    <th>Descto</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="text-align: center; width: 10%;">{{ items.vdes_cantidad }}</td>
                    <td style="text-align: center; width: 50%;">{{ items.vdes_concepto }}</td>
                    <td style="text-align: center;">{{ items.vdes_punit  | currency}}</td>
                    <td style="text-align: center;">{{ items.vdes_importe  | currency}}</td>
                    <td style="text-align: center; width: 10%;">{{ items.vdes_porc  | currency}}</td>
                    <td style="text-align: center;">{{ items.vdes_monto_descto  | currency}}</td>
                </tr>
                <tr style="text-align: right;">
                    <th colspan="5">Total:</th>
                    <td style="text-align: center;">
                        <strong>{{ items.vdes_a_pagar  | currency}}</strong>
                        <input type="hidden" formControlName="pago_foldescto" value="">
                        <input type="hidden" formControlName="pago_referencia" [(ngModel)]="this.ID">
                        <input type="hidden" formControlName="pago_montoapagar" value="">
                        <input type="hidden" formControlName="pago_userid" value="">
                        <input type="hidden" formControlName="pago_estatus" value="P">
                    </td>
                </tr>
                <tr style="text-align: left;">
                    <th colspan="5">
                        <small *ngIf="metodoPagoNovalido" class="text-danger">
                            Selecciona un metodo de pago
                        </small>
                        <select formControlName="metodoPago" class="form-control" [class.is-invalid]="metodoPagoNovalido">
                            <option value="" selected disabled> - Seleccione un metodo de pago - </option>
                            <option value="TC">Tarjeta de Crédito</option>
                            <option value="TC">Tarjeta de Dédito</option>
                        </select>
                    </th>
                </tr>
            </tbody>
        </table>
        Agrege una descripción para que pueda diferenciar este pago en el apartado de Recibos
        <br>
        <small *ngIf="conceptoNovalido" class="text-danger">
            Ingrese una descripción
        </small>
        <input type="text" class="form-control" maxlength="150" formControlName="pago_concepto" autocomplete="off" [class.is-invalid]="conceptoNovalido" placeholder="Descripción">
    </ng-container>
</div>

    <ng-container *ngIf="descuentos?.length > 0">
        <div style="text-align: right">
            <button class="btn btn-blue" [disabled]="!forma.valid">Pagar</button>
        </div>
        <p><strong>session_id:</strong> {{ session_id }}</p>
        <p><strong>successIndicator:</strong> {{ successIndicator }}</p>
    </ng-container>

</form>